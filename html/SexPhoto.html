<!DOCTYPE html>

<html>

<head>
    <title>CreationWong 静态网站</title>
    <meta name="CreationWong" content="网站">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body>

    <head>
        <!--外部文件调用-->
        <link rel="stylesheet" type="text/css" href="https://creationwong.github.io/css/tail.css">
        <script src="js/r18_2.0.js"></script>
    </head>
    <script>
        function setCookie(cname, cvalue, exdays) {
            var d = new Date();
            d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
            var expires = "expires=" + d.toGMTString();
            document.cookie = cname + "=" + cvalue + "; " + expires;
        }
        function getCookie(cname) {
            var name = cname + "=";
            var ca = document.cookie.split(';');
            for (var i = 0; i < ca.length; i++) {
                var c = ca[i].trim();
                if (c.indexOf(name) == 0) { return c.substring(name.length, c.length); }
            }
            return "";
        }
        function checkCookie() {
            var user = getCookie("username");
            if (user == "") {
                user = prompt("请输入你的名字:", "");
                if (user != "" && user != null) {
                    var password = 22533;
                    var testV = 1;
                    var pass1 = prompt("请输入密码");
                    while (testV < 3) {
                        if (pass1 == password) {
                            setCookie("username", user, 30);
                            alert(user+"成功授权！");
                            break;
                        }
                        testV += 1;
                        var pass1 = prompt("密码错误!请重新输入:");
                    }
                    if (testV == 3) {
                        var user = "NOPASS"
                        setCookie("username", user, 30);
                        history.go(0);
                        return " ";
                    }
                } else {
                    alert("无授权！");
                    return " ";
                }
            }
        }
        //刷新
        function r17() {
            var user = getCookie("username");
            if (user != "") {
                document.getElementById("src").src = "https://sex.nyan.xyz/api/v2/img";//填充html中src地址
            } else {
                checkCookie()
            }
        }
        function r18() {
            var user = getCookie("username");
            if (user != "NOPASS" && user != "") {
                document.getElementById("src").src = "https://sex.nyan.xyz/api/v2/img?r18=true";//填充html中src地址
            } else {
                alert("没有授权，无法访问！");
            }
        }
    </script>
</body>
<h1>随机二次元图片</h1>
<p>
    <input type="submit" onclick="javascript:r17()" value="显示内容">
    <input type="submit" onclick="javascript:r18()" value="显示授权内容">
</p>
<iframe id="src" width="1500" height="1000">
    <p>您的浏览器不支持显示该网页。</p>
</iframe>

<p id="tail">仅供学习交流使用，勿用非法用途! 否则网站不承担任何责任!</p>
<p id="tail">由 sex.nyan.xyz 提供解析服务</p>
<p id="tail">Copyright © 2022 CreationWong</p>

</html>